(function(t){function e(e){for(var r,o,i=e[0],l=e[1],c=e[2],d=0,p=[];d<i.length;d++)o=i[d],n[o]&&p.push(n[o][0]),n[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],r=!0,i=1;i<s.length;i++){var l=s[i];0!==n[l]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=s[0]))}return t}var r={},n={app:0},a=[];function o(e){if(r[e])return r[e].exports;var s=r[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=r,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(s,r,function(e){return t[e]}.bind(null,r));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var r=s("2b0e"),n=s("8c4f"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("error-displayer",{attrs:{message:t.errorMsg}}),s("router-view",{on:{error:t.onError}})],1)},o=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.message?s("div",[s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(t._s(t.message))])]):t._e()},l=[],c={name:"error-displayer",props:["message"]},u=c,d=s("2877"),p=Object(d["a"])(u,i,l,!1,null,null,null),h=p.exports,f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container page"},[s("p",[t._v("Password URL to fetch the password: ")]),s("div",{staticClass:"input-group input-group-lg bottom-margin"},[s("span",{staticClass:"input-group-addon glyphicon glyphicon-lock"}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.secretUrl,expression:"secretUrl"}],staticClass:"form-control",attrs:{id:"secret-url",readonly:""},domProps:{value:t.secretUrl},on:{input:function(e){e.target.composing||(t.secretUrl=e.target.value)}}})]),s("p",{staticClass:"btn-container"},[s("router-link",{attrs:{to:"/"}},[s("a",{staticClass:"btn btn-primary btn-lg",attrs:{role:"button"}},[t._v("Back")])])],1)])},g=[],m={data:function(){return{secretUrl:""}},mounted:function(){this.$emit("error","");var t=this.$route.params.secretKey;this.secretUrl=window.location.protocol+"//"+window.location.host+window.location.pathname+"#/show-password/"+t,window.focusInput("secret-url")}},w=m,v=Object(d["a"])(w,f,g,!1,null,null,null),b=v.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container page"},[s("p",[t._v("Password: ")]),s("div",{staticClass:"input-group input-group-lg bottom-margin"},[s("span",{staticClass:"input-group-addon glyphicon glyphicon-lock"}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password-display",readonly:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),s("p",{staticClass:"btn-container"},[s("router-link",{attrs:{to:"/"}},[s("a",{staticClass:"btn btn-primary btn-lg",attrs:{role:"button"}},[t._v("Back")])])],1)])},C=[],_={data:function(){return{password:""}},mounted:function(){this.$emit("error","");var t=new FormData;t.append("secretKey",this.$route.params.secretKey);var e=this;fetch("/retrieve",{method:"post",body:t}).then(function(t){return t.json()}).then(function(t){t.success?(e.password=t.secret,window.focusInput("password-display")):e.$emit("error",t.errorMsg)}).catch(function(){e.$emit("error","Unknown error")})}},x=_,$=Object(d["a"])(x,y,C,!1,null,null,null),k=$.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("p",[t._v("\n        Enter the password you wish to share and choose for how long it should be available,\n        as well as for how many times it should be retrievable. After that you will receive\n        an URL that you can distribute.\n    ")]),s("div",{staticClass:"input-group input-group-lg bottom-margin"},[s("span",{staticClass:"input-group-addon glyphicon glyphicon-lock",attrs:{for:"password-field",id:"sizing-addon1"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordField,expression:"passwordField"}],staticClass:"form-control",attrs:{"aria-label":"Password",type:"password",id:"password-field",placeholder:"Password","aria-describedby":"sizing-addon1"},domProps:{value:t.passwordField},on:{input:function(e){e.target.composing||(t.passwordField=e.target.value)}}})]),s("div",{staticClass:"input-group input-group-lg bottom-margin"},[s("span",{staticClass:"input-group-addon glyphicon glyphicon-lock",attrs:{for:"password-confirm-field",id:"sizing-addon2"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordConfirmField,expression:"passwordConfirmField"}],staticClass:"form-control",attrs:{"aria-label":"Confirm password",type:"password",id:"password-confirm-field",placeholder:"Confirm Password","aria-describedby":"sizing-addon2"},domProps:{value:t.passwordConfirmField},on:{input:function(e){e.target.composing||(t.passwordConfirmField=e.target.value)}}})]),s("div",{staticClass:"bottom-margin"},[s("nof-days-selector",{on:{changed:t.daysChanged}}),s("nof-hours-selector",{on:{changed:t.hoursChanged}})],1),s("div",{staticClass:"bottom-margin"},[s("nof-views-selector",{on:{changed:t.viewsChanged}})],1),s("p",{staticClass:"btn-container"},[s("a",{staticClass:"btn btn-primary btn-lg",attrs:{id:"get-url-btn",href:"#",role:"button"},on:{click:t.storeSecret}},[t._v("\n            Get URL\n        ")])])])},D=[],O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn btn-default btn-sm dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[s("span",{staticClass:"glyphicon glyphicon-eye-open"}),s("span",[t._v(t._s(t.selectViewsBtnText))]),s("span",{staticClass:"caret"})]),s("ul",{staticClass:"dropdown-menu",attrs:{id:"views-select"}},t._l(t.selectViews,function(e,r){return s("li",{key:r},[s("a",{attrs:{href:"#","data-views":r},on:{click:t.changeViews}},[t._v(t._s(e))])])}),0)])},F=[],V={name:"nof-views-selector",data:function(){return{views:1,selectViews:[],selectViewsBtnText:"Valid for 1 view"}},created:function(){for(var t=1;t<=10;t++)this.selectViews[t]=this.getViewsLabel(t)},methods:{getViewsLabel:function(t){var e=t+" view";return t>1&&(e+="s"),e},changeViews:function(t){t.preventDefault(),this.views=t.target.getAttribute("data-views"),this.selectViewsBtnText="Valid for "+this.getViewsLabel(this.views),this.$emit("changed",this.views)}}},P=V,E=Object(d["a"])(P,O,F,!1,null,null,null),H=E.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn btn-default btn-sm dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[s("span",{attrs:{id:"select-hours-btn-txt"}},[t._v(t._s(t.selectHoursBtnText))]),s("span",{staticClass:"caret"})]),s("ul",{staticClass:"dropdown-menu",attrs:{id:"hours-select"}},t._l(t.selectHours,function(e,r){return s("li",{key:r},[s("a",{attrs:{href:"#","data-hours":r},on:{click:t.changeHours}},[t._v(t._s(e))])])}),0)])},L=[],T={name:"nof-hours-selector",data:function(){return{hours:0,selectHours:[],selectHoursBtnText:"and 0 hour"}},created:function(){for(var t=0;t<=23;t++)this.selectHours.push(this.getHoursLabel(t))},methods:{getHoursLabel:function(t){var e=t+" hour";return t>1&&(e+="s"),e},changeHours:function(t){t.preventDefault(),this.hours=t.target.getAttribute("data-hours"),this.selectHoursBtnText="and "+this.getHoursLabel(this.hours),this.$emit("changed",this.hours)}}},S=T,U=Object(d["a"])(S,B,L,!1,null,null,null),z=U.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn btn-default btn-sm dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[s("span",{staticClass:"glyphicon glyphicon-time"}),s("span",{attrs:{id:"select-days-btn-txt"}},[t._v(t._s(t.selectDaysBtnText))]),t._v("   "),s("span",{staticClass:"caret"})]),s("ul",{staticClass:"dropdown-menu",attrs:{id:"days-select"}},t._l(t.selectDays,function(e,r){return s("li",{key:r},[s("a",{attrs:{href:"#","data-days":r},on:{click:t.changeDays}},[t._v(t._s(e))])])}),0)])},K=[],N={name:"nof-days-selector",data:function(){return{days:1,selectDays:[],selectDaysBtnText:"Valid for 1 day"}},created:function(){for(var t=0;t<=10;t++)this.selectDays.push(this.getDaysLabel(t))},methods:{getDaysLabel:function(t){var e=t+" day";return t>1&&(e+="s"),e},changeDays:function(t){t.preventDefault(),this.days=t.target.getAttribute("data-days"),this.selectDaysBtnText="Valid for "+this.getDaysLabel(this.days),this.$emit("changed",this.days)}}},R=N,A=Object(d["a"])(R,M,K,!1,null,null,null),I=A.exports,W={components:{NofDaysSelector:I,NofHoursSelector:z,NofViewsSelector:H},data:function(){return{passwordField:"",passwordConfirmField:"",views:1,hours:0,days:1}},mounted:function(){this.$emit("error","")},methods:{viewsChanged:function(t){this.views=t},hoursChanged:function(t){this.hours=t},daysChanged:function(t){this.days=t},storeSecret:function(){if(this.$emit("error",""),this.passwordConfirmed()){var t=new FormData;t.append("password",this.passwordField),t.append("views",this.views),t.append("ttl",3600*this.hours+3600*this.days*24);var e=this;fetch("/store",{method:"post",body:t}).then(function(t){return t.json()}).then(function(t){t.success?e.$router.push("/get-details/"+t.secretKey):e.$emit("error",t.errorMsg)}).catch(function(){e.$emit("error","Unknown error")})}},passwordConfirmed:function(){return this.passwordField!==this.passwordConfirmField?(this.$emit("error","You need to enter the same password in the confirm field"),!1):""!==this.passwordField||(this.$emit("error","You need to enter a password"),!1)}}},J=W,Y=Object(d["a"])(J,j,D,!1,null,null,null),q=Y.exports,G=new n["a"]({routes:[{path:"/",component:q},{path:"/get-details/:secretKey([a-z0-9]{13};[a-z0-9]{16,32})",component:b},{path:"/show-password/:secretKey([a-z0-9]{13};[a-z0-9]{16,32})",component:k},{path:"/:secretKey([a-z0-9]{13};[a-z0-9]{16,32})",component:k},{path:"/*",component:q}]}),Q={data:function(){return{errorMsg:""}},components:{ErrorDisplayer:h},router:G,methods:{onError:function(t){this.errorMsg=t}}},X=Q,Z=Object(d["a"])(X,a,o,!1,null,null,null),tt=Z.exports,et=s("1413")();et.fetch,et.Request,et.Response,et.Headers;window.focusInput=function(t){setTimeout(function(){var e=document.getElementById(t);e&&(e.select(),e.focus())},300)},r["a"].use(n["a"]),new r["a"](tt).$mount("#phpsst"),"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js").then(function(){console.log("Service Worker Registered")})}});
//# sourceMappingURL=app.ccfb877b.js.map